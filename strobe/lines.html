<!DOCTYPE html>

<html>
<head>
	<meta charset="UTF-8" />
	<title>linezzz</title>
	<style type="text/css">
	body{
		background-color: white;
		margin:0;
	}


	:-webkit-full-screen .controls{
 	display: none;
}

:-moz-full-screen .controls{
 	display: none;
}

:-ms-fullscreen .controls{
 	display: none;
}

:full-screen .controls{ /*pre-spec */
 	display: none;
}

:fullscreen .controls{ /* spec */
 	display: none;
}

	</style>

</head>
<body>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>

<script src="paper.js"></script>
<script src="fullscreen.js"></script>

<script type="text/paperscript" canvas="canvas">

fullscreen.init();

$(document).on('click', function(){
  pause = !pause;
})

var pause = false;
var on = true;
var rate = 2;
var trigger = 0;
var hold = 0;
// The amount of lines we want to make:
var count = 150;

// Create a symbol, which we will use to place instances of later:
// var path = new Path.Circle({
// 	center: [0, 0],
// 	radius: 10,
// 	fillColor: 'white',
// 	strokeColor: 'black'
// });

//============================================================
var range = 20;
 var size = new Size(view.size.width, range);
// console.log(size.width); // 10
// console.log(size.height); // 5
 var rect = new Rectangle(new Point(20, 15), size);
// console.log(rect); // { x: 20, y: 15, width: 10, height: 5 }

// var rectangle = new Rectangle(
// 	new Point(50, 50),
// 	new Point(150, 100)
// 	);

var path = new Path.Rectangle(rect);

path.fillColor = '#000000';

// path.selected = true;

//============================================================

var symbol = new Symbol(path);
//var symbole = new Symbol(rect);
// Place the instances of the symbol:
for (var i = 0; i < count; i++) {
	// The center position is a random point in the view:
	//var center = Point.random() * view.size;
	//var center = new Point(view.center);
	var center = new Point(view.size.width/2, Math.floor(view.size.height*(i/count)));


	var placedSymbol = symbol.place(center);
	var r = Math.random();
	placedSymbol.scale(1, r* (i / count));
}



for (var i = 0; i < count; i++){
	var point = Point.random() * view.size;
}


		console.log(project.activeLayer.children[4]);

// The onFrame function is called up to 60 times a second:
function onFrame(event) {

	if(pause){
		return;
	}

	// Run through the active layer's children list and change
	// the position of the placed symbols:
if(trigger >= rate){

		if(on){
		$('body').css('background-color', 'white');
		hold = 0;
		} else {
		$('body').css('background-color', 'black');
		}
		//if(hold >= rate){
		on = !on;

		//}
		trigger = 0;
		rate = Math.floor(Math.random() * 8);
		console.log(rate);

}
hold++;
trigger++;

	for (var i = 0; i < count; i++) {





		var item = project.activeLayer.children[i];

		// Move the item 1/20th of its width to the right. This way
		// larger circles move faster than smaller circles:
		var r = Math.random();
		//item.scale(1, r* (i / count));
		item.position.y += item.bounds.height / 2;
		//console.log(r*2);
		//item.scale(1, r*5);

		// If the item has left the view on the right, move it back
		// to the left:
		if (item.bounds.top > view.size.height) {
			item.position.y = -item.bounds.height;
		}
	}
}

</script>

<canvas id="canvas" resize></canvas>

</body>
</html>